{"version":3,"sources":["utils/auth.js","components/ProtectedRoute/ProtectedRoute.js","components/ReactForm/ReactForm.js","pages/LogIn/LogIn.js","pages/Home/Home.js","index.js","App.js"],"names":["auth","Auth","Object","classCallCheck","this","authenticated","token","timeStamp","cred","axios","post","then","response","console","log","catch","error","cb","_this","data","returnTimeStamp","_this2","headers","Authorization","concat","decoded","jwtDecode","Date","exp","ProtectedRoute","_ref","Component","component","rest","objectWithoutProperties","react_default","a","createElement","react_router","assign","render","props","isAuthenticated","to","pathname","state","from","location","withRouter","history","_useState","useState","email","password","_useState2","slicedToArray","userInput","setUserInput","handleInputChange","event","_event$target","target","name","value","objectSpread","defineProperty","Fragment","type","onChange","onClick","signUp","logIn","push","LogIn","ReactForm_ReactForm","Home","useEffect","interval","setInterval","refreshToken","clearInterval","ReactDOM","react_router_dom","basename","process","exact","path","document","getElementById"],"mappings":"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","file":"static/js/main.8867f3a2.chunk.js","sourcesContent":["import axios from 'axios'\r\nimport jwtDecode from 'jwt-decode';\r\n\r\n\r\nclass Auth {\r\n  constructor() {\r\n    this.authenticated = false;\r\n    this.token = '';\r\n    this.timeStamp = '';\r\n  }\r\n\r\n  signUp(cred) {\r\n    axios.post('https://altamir-generator-api.herokuapp.com/auth/register', cred)\r\n      .then(function (response) {\r\n        console.log(\"signup success\");\r\n        console.log(response);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(\"signup Failed\");\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n\r\n  logIn(cred, cb) {\r\n    axios.post('https://altamir-generator-api.herokuapp.com/auth/login', cred)\r\n      .then((response) => {\r\n        console.log(\"login success\");\r\n        console.log(response);\r\n        this.token = response.data.token;\r\n        this.authenticated = true;\r\n        this.timeStamp = this.returnTimeStamp(response.data.token)\r\n        cb();\r\n      })\r\n      .catch((error) => {\r\n        this.authenticated = false;\r\n        console.log(\"login Failed\");\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  refreshToken() {\r\n    axios.post('https://altamir-generator-api.herokuapp.com/auth/refresh', {},\r\n      {\r\n        headers: {\r\n          \"Authorization\": `Bearer ${this.token}`\r\n        }\r\n      })\r\n      .then((response) => {\r\n        console.log(\"refresh success\");\r\n        console.log(response);\r\n      })\r\n      .catch((error) => {\r\n        this.authenticated = false;\r\n        console.log(\"refresh Failed\");\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  isAuthenticated() {\r\n    return this.authenticated;\r\n  }\r\n\r\n  // Decode JWT token and return converted Unix time\r\n  returnTimeStamp(token) {\r\n    let decoded = jwtDecode(token)\r\n    return new Date(decoded.exp * 1000)\r\n  }\r\n}\r\n\r\nexport default new Auth();","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport auth from \"../../utils/auth\"\r\n\r\n\r\nexport default function ProtectedRoute({\r\n  component: Component,\r\n  ...rest\r\n}) {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={props => {\r\n        if (auth.isAuthenticated()) {\r\n          return <Component {...props} />;\r\n        } else {\r\n          return (\r\n            <Redirect\r\n              to={{\r\n                pathname: \"/login\",\r\n                state: {\r\n                  from: props.location\r\n                }\r\n              }}\r\n            />\r\n          );\r\n        }\r\n      }}\r\n    />\r\n  );\r\n};","import React, { useState } from 'react';\r\nimport { withRouter } from \"react-router-dom\";\r\nimport auth from \"../../utils/auth\"\r\n\r\n\r\nexport default withRouter(function ReactForm({ history }) {\r\n  // Handling user input here\r\n  const [userInput, setUserInput] = useState({\r\n    email: '',\r\n    password: ''\r\n  });\r\n  const handleInputChange = event => {\r\n    const { name, value } = event.target;\r\n    setUserInput({\r\n      ...userInput,\r\n      [name]: value\r\n    });\r\n  };\r\n\r\n  // Function calls for authenticating\r\n  const signUp = () => {\r\n    auth.signUp(userInput)\r\n  };\r\n\r\n  const logIn = () => {\r\n    // Call log in function, if successful callback will fire and will be routed to protected route\r\n    auth.logIn(userInput, () => {\r\n      history.push(\"/\");\r\n    })\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h4>Sign up and Log in</h4>\r\n\r\n      <label>\r\n        <strong>Email</strong>\r\n      </label>\r\n      <input\r\n        type=\"text\"\r\n        value={userInput[\"email\"]}\r\n        name=\"email\"\r\n        onChange={handleInputChange}\r\n      />\r\n\r\n      <label>\r\n        <strong>Password</strong>\r\n      </label>\r\n      <input\r\n        type=\"password\"\r\n        value={userInput[\"password\"]}\r\n        name=\"password\"\r\n        onChange={handleInputChange}\r\n      />\r\n\r\n      <button onClick={signUp}>\r\n        Sign up\r\n      </button>\r\n\r\n      <button onClick={logIn}>\r\n        Log in\r\n      </button>\r\n    </>\r\n  );\r\n})\r\n","import React from \"react\";\r\nimport ReactForm from \"../../components/ReactForm\"\r\n\r\n\r\nexport default function LogIn() {\r\n  return (\r\n    <div>\r\n      <ReactForm />\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport auth from \"../../utils/auth\"\r\n\r\n\r\nexport default function Home() {\r\n\r\n  useEffect(() => {\r\n    // Refresh token every 5 seconds\r\n    let interval = setInterval(() => {\r\n      console.log('refresh')\r\n      auth.refreshToken()\r\n    }, 5000)\r\n\r\n    // On Dismount clear interval\r\n    return () => {\r\n      clearInterval(interval)\r\n    }\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      <h2>A Protected Route?... Nice!</h2>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\n\r\nReactDOM.render(<BrowserRouter basename={process.env.PUBLIC_URL}>\r\n  <App />\r\n</BrowserRouter>, document.getElementById('root'));","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport ProtectedRoute from './components/ProtectedRoute'\r\nimport LogIn from \"./pages/LogIn\"\r\nimport Home from \"./pages/Home\"\r\n\r\nexport default function App() {\r\n  return (\r\n    <Switch>\r\n      <ProtectedRoute exact path=\"/\" component={Home} />\r\n      <Route exact path=\"/login\" component={LogIn} />\r\n      <Route path=\"*\" component={() => \"404 NOT FOUND\"} />\r\n    </Switch>\r\n  );\r\n}\r\n"],"sourceRoot":""}