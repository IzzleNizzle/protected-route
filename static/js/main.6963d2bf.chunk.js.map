{"version":3,"sources":["utils/auth.js","components/ProtectedRoute/ProtectedRoute.js","components/ReactForm/ReactForm.js","pages/LogIn/LogIn.js","pages/Home/Home.js","index.js","App.js"],"names":["auth","Auth","Object","classCallCheck","this","authenticated","token","timeStamp","cred","axios","post","then","response","console","log","catch","error","cb","_this","data","returnTimeStamp","_this2","headers","Authorization","concat","decoded","jwtDecode","Date","exp","ProtectedRoute","_ref","Component","component","rest","objectWithoutProperties","react_default","a","createElement","react_router","assign","render","props","isAuthenticated","to","pathname","state","from","location","withRouter","history","_useState","useState","email","password","_useState2","slicedToArray","userInput","setUserInput","handleInputChange","event","_event$target","target","name","value","objectSpread","defineProperty","Fragment","type","onChange","onClick","signUp","logIn","push","LogIn","ReactForm_ReactForm","Home","setInterval","refreshToken","ReactDOM","react_router_dom","exact","path","document","getElementById"],"mappings":"0OAsEeA,EAAA,eAjEb,SAAAC,IAAeC,OAAAC,EAAA,EAAAD,CAAAE,KAAAH,GACbG,KAAKC,eAAgB,EACrBD,KAAKE,MAAQ,GACbF,KAAKG,UAAY,sDAGZC,GACLC,IAAMC,KAAK,4DAA6DF,GACrEG,KAAK,SAAUC,GACdC,QAAQC,IAAI,kBACZD,QAAQC,IAAIF,KAEbG,MAAM,SAAUC,GACfH,QAAQC,IAAI,iBACZD,QAAQC,IAAIE,mCAKZR,EAAMS,GAAI,IAAAC,EAAAd,KACdK,IAAMC,KAAK,yDAA0DF,GAClEG,KAAK,SAACC,GACLC,QAAQC,IAAI,iBACZD,QAAQC,IAAIF,GACZM,EAAKZ,MAAQM,EAASO,KAAKb,MAC3BY,EAAKb,eAAgB,EACrBa,EAAKX,UAAYW,EAAKE,gBAAgBR,EAASO,KAAKb,OACpDW,MAEDF,MAAM,SAACC,GACNE,EAAKb,eAAgB,EACrBQ,QAAQC,IAAI,gBACZD,QAAQC,IAAIE,4CAIH,IAAAK,EAAAjB,KACbK,IAAMC,KAAK,2DAA4D,GACrE,CACEY,QAAS,CACPC,cAAA,UAAAC,OAA2BpB,KAAKE,UAGnCK,KAAK,SAACC,GACLC,QAAQC,IAAI,mBACZD,QAAQC,IAAIF,KAEbG,MAAM,SAACC,GACNK,EAAKhB,eAAgB,EACrBQ,QAAQC,IAAI,kBACZD,QAAQC,IAAIE,+CAKhB,OAAOZ,KAAKC,sDAIEC,GACd,IAAImB,EAAUC,IAAUpB,GACxB,OAAO,IAAIqB,KAAmB,IAAdF,EAAQG,eC7Db,SAASC,EAATC,GAGZ,IAFUC,EAEVD,EAFDE,UACGC,EACF/B,OAAAgC,EAAA,EAAAhC,CAAA4B,EAAA,eACD,OACEK,EAAAC,EAAAC,cAACC,EAAA,EAADpC,OAAAqC,OAAA,GACMN,EADN,CAEEO,OAAQ,SAAAC,GACN,OAAIzC,EAAK0C,kBACAP,EAAAC,EAAAC,cAACN,EAAcU,GAGpBN,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEK,GAAI,CACFC,SAAU,SACVC,MAAO,CACLC,KAAML,EAAMM,4CChBfC,cAAW,SAAAlB,GAAgC,IAAXmB,EAAWnB,EAAXmB,QAAWC,EAEtBC,mBAAS,CACzCC,MAAO,GACPC,SAAU,KAJ4CC,EAAApD,OAAAqD,EAAA,EAAArD,CAAAgD,EAAA,GAEjDM,EAFiDF,EAAA,GAEtCG,EAFsCH,EAAA,GAMlDI,EAAoB,SAAAC,GAAS,IAAAC,EACTD,EAAME,OAAtBC,EADyBF,EACzBE,KAAMC,EADmBH,EACnBG,MACdN,EAAavD,OAAA8D,EAAA,EAAA9D,CAAA,GACRsD,EADOtD,OAAA+D,EAAA,EAAA/D,CAAA,GAET4D,EAAOC,MAgBZ,OACE5B,EAAAC,EAAAC,cAAAF,EAAAC,EAAA8B,SAAA,KACE/B,EAAAC,EAAAC,cAAA,gCAEAF,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,wBAEFF,EAAAC,EAAAC,cAAA,SACE8B,KAAK,OACLJ,MAAOP,EAAS,MAChBM,KAAK,QACLM,SAAUV,IAGZvB,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,2BAEFF,EAAAC,EAAAC,cAAA,SACE8B,KAAK,WACLJ,MAAOP,EAAS,SAChBM,KAAK,WACLM,SAAUV,IAGZvB,EAAAC,EAAAC,cAAA,UAAQgC,QAnCG,WACbrE,EAAKsE,OAAOd,KAkCV,WAIArB,EAAAC,EAAAC,cAAA,UAAQgC,QAnCE,WAEZrE,EAAKuE,MAAMf,EAAW,WACpBP,EAAQuB,KAAK,SAgCb,aCvDS,SAASC,IACtB,OACEtC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACqC,EAAD,OCHS,SAASC,IAOtB,OALAC,YAAY,WACV/D,QAAQC,IAAI,WACZd,EAAK6E,gBACJ,KAGD1C,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,qDCPNyC,IAAStC,OAAOL,EAAAC,EAAAC,cAAC0C,EAAA,EAAD,KACd5C,EAAAC,EAAAC,cCDa,WACb,OACEF,EAAAC,EAAAC,cAACC,EAAA,EAAD,KACEH,EAAAC,EAAAC,cAACR,EAAD,CAAgBmD,OAAK,EAACC,KAAK,IAAIjD,UAAW2C,IAC1CxC,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAO0C,OAAK,EAACC,KAAK,SAASjD,UAAWyC,IACtCtC,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAO2C,KAAK,IAAIjD,UAAW,iBAAM,qBDJrC,OACgBkD,SAASC,eAAe","file":"static/js/main.6963d2bf.chunk.js","sourcesContent":["import axios from 'axios'\nimport jwtDecode from 'jwt-decode';\n\n\nclass Auth {\n  constructor() {\n    this.authenticated = false;\n    this.token = '';\n    this.timeStamp = '';\n  }\n\n  signUp(cred) {\n    axios.post('https://altamir-generator-api.herokuapp.com/auth/register', cred)\n      .then(function (response) {\n        console.log(\"signup success\");\n        console.log(response);\n      })\n      .catch(function (error) {\n        console.log(\"signup Failed\");\n        console.log(error);\n      });\n  }\n\n\n  logIn(cred, cb) {\n    axios.post('https://altamir-generator-api.herokuapp.com/auth/login', cred)\n      .then((response) => {\n        console.log(\"login success\");\n        console.log(response);\n        this.token = response.data.token;\n        this.authenticated = true;\n        this.timeStamp = this.returnTimeStamp(response.data.token)\n        cb();\n      })\n      .catch((error) => {\n        this.authenticated = false;\n        console.log(\"login Failed\");\n        console.log(error);\n      });\n  }\n\n  refreshToken() {\n    axios.post('https://altamir-generator-api.herokuapp.com/auth/refresh', {},\n      {\n        headers: {\n          \"Authorization\": `Bearer ${this.token}`\n        }\n      })\n      .then((response) => {\n        console.log(\"refresh success\");\n        console.log(response);\n      })\n      .catch((error) => {\n        this.authenticated = false;\n        console.log(\"refresh Failed\");\n        console.log(error);\n      });\n  }\n\n  isAuthenticated() {\n    return this.authenticated;\n  }\n\n  // Decode JWT token and return converted Unix time\n  returnTimeStamp(token) {\n    let decoded = jwtDecode(token)\n    return new Date(decoded.exp * 1000)\n  }\n}\n\nexport default new Auth();","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport auth from \"../../utils/auth\"\n\n\nexport default function ProtectedRoute({\n  component: Component,\n  ...rest\n}) {\n  return (\n    <Route\n      {...rest}\n      render={props => {\n        if (auth.isAuthenticated()) {\n          return <Component {...props} />;\n        } else {\n          return (\n            <Redirect\n              to={{\n                pathname: \"/login\",\n                state: {\n                  from: props.location\n                }\n              }}\n            />\n          );\n        }\n      }}\n    />\n  );\n};","import React, { useState } from 'react';\nimport { withRouter } from \"react-router-dom\";\nimport auth from \"../../utils/auth\"\n\n\nexport default withRouter(function ReactForm({ history }) {\n  // Handling user input here\n  const [userInput, setUserInput] = useState({\n    email: '',\n    password: ''\n  });\n  const handleInputChange = event => {\n    const { name, value } = event.target;\n    setUserInput({\n      ...userInput,\n      [name]: value\n    });\n  };\n\n  // Function calls for authenticating\n  const signUp = () => {\n    auth.signUp(userInput)\n  };\n\n  const logIn = () => {\n    // Call log in function, if successful callback will fire and will be routed to protected route\n    auth.logIn(userInput, () => {\n      history.push(\"/\");\n    })\n  };\n\n  return (\n    <>\n      <h4>Sign up and Log in</h4>\n\n      <label>\n        <strong>Email</strong>\n      </label>\n      <input\n        type=\"text\"\n        value={userInput[\"email\"]}\n        name=\"email\"\n        onChange={handleInputChange}\n      />\n\n      <label>\n        <strong>Password</strong>\n      </label>\n      <input\n        type=\"password\"\n        value={userInput[\"password\"]}\n        name=\"password\"\n        onChange={handleInputChange}\n      />\n\n      <button onClick={signUp}>\n        Sign up\n      </button>\n\n      <button onClick={logIn}>\n        Log in\n      </button>\n    </>\n  );\n})\n","import React from \"react\";\r\nimport ReactForm from \"../../components/ReactForm\"\r\n\r\n\r\nexport default function LogIn() {\r\n  return (\r\n    <div>\r\n      <ReactForm />\r\n    </div>\r\n  )\r\n}\r\n","import React from \"react\";\r\nimport auth from \"../../utils/auth\"\r\n\r\n\r\nexport default function Home() {\r\n  // Refresh token every 5 seconds\r\n  setInterval(() => {\r\n    console.log('refresh')\r\n    auth.refreshToken()\r\n  }, 5000)\r\n\r\n  return (\r\n    <div>\r\n      <h2>A Protected Route?... Nice!</h2>\r\n    </div>\r\n  );\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { BrowserRouter } from \"react-router-dom\";\n\n\nReactDOM.render(<BrowserRouter>\n  <App />\n</BrowserRouter>, document.getElementById('root'));","import React from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport ProtectedRoute from './components/ProtectedRoute'\nimport LogIn from \"./pages/LogIn\"\nimport Home from \"./pages/Home\"\n\nexport default function App() {\n  return (\n    <Switch>\n      <ProtectedRoute exact path=\"/\" component={Home} />\n      <Route exact path=\"/login\" component={LogIn} />\n      <Route path=\"*\" component={() => \"404 NOT FOUND\"} />\n    </Switch>\n  );\n}\n"],"sourceRoot":""}